---
layout:     post
title:      "运维作业"
subtitle:   "第一周作业"
date:       2025-10-30
author:     "杨奕城"
tags:
    - 运维
    - Linux
    - VMware
    - 网络
    - Node.js
    - Ngnix
---

# 1.VMware、Rocky、Ubuntu的安装以及SSH连接方法

## 1.VMware安装

### 首先打开[VMware官网](https://www.vmware.com/)

![screen-capture](/img/in-post/第一周作业/1dd941309e021cfd37d1ee81f6f7936a.png)

### 选择SEE DESKTOP HYPERVISORS

![screen-capture](/img/in-post/第一周作业/33c29aabe49772195b4d5cbaf3239815.png)

### 选择DOWNLOAD NOW

![screen-capture](/img/in-post/第一周作业/667b95840cff450326ff9505d6df60bb.png)

### 注册登录账号

![screen-capture](/img/in-post/第一周作业/cbd858bf47ab8959f9ce902115b61f03.png)

### 选择免费软件下载

![screen-capture](/img/in-post/第一周作业/9c66c94a565c71fc42d3c372ad6a05e1.png)

### 选择VMware Workstation Pro

![screen-capture](/img/in-post/第一周作业/403bc4731e995942c7f6a7192f4ba6c3.png)

### 选择需要的版本（此处以17.6.4为例）

![screen-capture](/img/in-post/第一周作业/a4cbde41e4dcae781eef3e411aa27a60.png)

### 浏览并同意协议之后选择下载

![screen-capture](/img/in-post/第一周作业/0befaf1b5f86b55a4cee39e5d47b4492.png)

### 选择Yes进行验证

![screen-capture](/img/in-post/第一周作业/59966b72d35d011375dcb25a9aec15de.png)

### 填写必要信息并提交

![screen-capture](/img/in-post/第一周作业/000102402d775ef560c6ca8f00b4c6bc.png)

### 回到上一页开始下载

![screen-capture](/img/in-post/第一周作业/05ec9bcf5d0bd65d30e101a67fc493d8.png)

### 运行下载后的可执行文件进行安装（一直选择下一步即可，可修改安装路径，可选择用于个人用途直接使用或输入许可证密钥以允许商业用途）

![screen-capture](/img/in-post/第一周作业/93469d638e62d6565fe76a660893ba8c.png)

## PS：启动软件后是英文，修改为中文的方法

**在属性中的目标一栏最后添加“--locale zh_CN”**

![screen-capture](/img/in-post/第一周作业/7f9681537d87ce30165efabbea29d739.png)

## 2.Rocky虚拟机安装

### 新建虚拟机，选择自定义后一直选择下一步（接下来没有详细介绍的均按照默认设置下一步即可）

![screen-capture](/img/in-post/第一周作业/9628c74b9f971463bb740568903392ae.png)

### 选择稍后安装操作系统

![screen-capture](/img/in-post/第一周作业/a10ac9aae8382fd519a0d065130c7307.png)

### 选择Linux 版本为Rocky Linux 64位

![screen-capture](/img/in-post/第一周作业/f0a2e9f96dedee0a33e72bab6f76ace7.png)

### 根据需要修改名称和安装路径或直接下一步

![screen-capture](/img/in-post/第一周作业/2fffd935685b7365a47a75b0cc985833.png)

### 根据需要修改处理器和内核数量

![screen-capture](/img/in-post/第一周作业/929982935e13c60042ef2fd689aa21e0.png)

### 根据需要修改内存大小

![screen-capture](/img/in-post/第一周作业/07bec9b0177dcf55c291a1193345c75c.png)

### 磁盘类型选择SCSI

![screen-capture](/img/in-post/第一周作业/cba93a347500f4763908cfb76eb24b08.png)

### 按需求设置磁盘大小

![screen-capture](/img/in-post/第一周作业/7d1594e2d84137ef47445ad29dd478f0.png)

### 完成配置

![screen-capture](/img/in-post/第一周作业/89cf7f8618ac97fc04f7a0a9ed2301f4.png)

### 在虚拟机设置里选择Rocky的ISO映像文件后确定并启动虚拟机

![screen-capture](/img/in-post/第一周作业/978615f0836d6a748083bdefb4359ad7.png)

### 选择安装

![screen-capture](/img/in-post/第一周作业/176b6eb593c5e1d5b9bdc99fea42012f.png)

### 继续

![screen-capture](/img/in-post/第一周作业/1701597bd3dc490a84339c27404ae347.png)

### 选择安装目录和时区

![screen-capture](/img/in-post/第一周作业/deec97950a8a4f6227d8d624045f6813.png)

### 在安装目录选择创建的虚拟磁盘

![screen-capture](/img/in-post/第一周作业/3a902c3eea99e21e46065efedc271fcc.png)

### 选择时区为上海

![screen-capture](/img/in-post/第一周作业/fdf951fb67d674135e63341362bd4059.png)

### 启用网卡修改主机名

![screen-capture](/img/in-post/第一周作业/29dbb993c4c64ec18ad2ed11af634748.png)

### 设置管理员密码

![screen-capture](/img/in-post/第一周作业/783121491df9648f3b1a7edfc4055419.png)

### 添加用户

![screen-capture](/img/in-post/第一周作业/16d02be46ac4bbb25bacf3c997a4ece1.png)

### 开始安装

![screen-capture](/img/in-post/第一周作业/9c87255396eb7d159bc739f45962bb96.png)

### 安装完成选择重启系统

![screen-capture](/img/in-post/第一周作业/eb80ec89595c6a9e7daa525be117fb8b.png)

### 同意协议完成配置

![screen-capture](/img/in-post/第一周作业/5342cca841fe8ac9005372d8168c52e2.png)

### 登录账户

![screen-capture](/img/in-post/第一周作业/7eafc61055f403839a1187c2c172390d.png)

### 欢迎页选择默认配置完成安装

![screen-capture](/img/in-post/第一周作业/df33bbc1a6b20a576a632a856b6d66a6.png)

## 3.Ubuntu虚拟机安装

### 硬件配置类似Rocky，选择Ubuntu 64 位的操作系统和对应映像

![screen-capture](/img/in-post/第一周作业/d4b72cfc90992cc7383b9f93121f0788.png)

### 选择安装

![screen-capture](/img/in-post/第一周作业/dc7d8ee39d2b158d79aaaf83105b8169.png)

### 选择语言

![screen-capture](/img/in-post/第一周作业/a888a9378d7e5f9d3d3305c3a9fd9477.png)

### 接下来一直选择默认选项直到填写主机和用户名

![screen-capture](/img/in-post/第一周作业/b347fd2c5409ade609f5c3bde500eb1e.png)

### 选择安装OpenSSH sever后一直选择下一步直到开始安装

![screen-capture](/img/in-post/第一周作业/30d9ddc1ceb16f4a302e0e7c7c44570d.png)

### 安装完成选择重启

![screen-capture](/img/in-post/第一周作业/62bdbcb1facb496338b339ec8e5b1be4.png)

### 输入用户名和密码进入

![screen-capture](/img/in-post/第一周作业/f8f191e8b454f8da3819a156a8d9fbd5.png)

## 4.SSH远程登陆

### 通过ip a确认被连接主机地址

![screen-capture](/img/in-post/第一周作业/5e5c81461476d5991f5dfe61ca10f452.png)

### 新建会话填写主机ip地址

![screen-capture](/img/in-post/第一周作业/46d583cbe7b9a59cf5aee80349f6102f.png)

### 填写被访问主机的用户名和密码

![screen-capture](/img/in-post/第一周作业/ba3aeb7aa35df018db4b15668fc6c4b4.png)

### 点击连接，连接到目标主机

![screen-capture](/img/in-post/第一周作业/0d0d7ffa9e9130f70f8e92a2bbd74ec5.png)

### 首次连接选择接受并保存

![screen-capture](/img/in-post/第一周作业/4b6f5c8e214f12772a012cbdc571f9e9.png)

### 完成连接

![screen-capture](/img/in-post/第一周作业/545cb80d6a3705ab35284c2f80912c3c.png)

2.总结什么是shell，以及常见的各类shell

## shell是什么

- shell是一种编程语言
- shell是程序解释器，接收来自用户的命令
- shell是运行在Linux上的程序，提供用户与内核的交互接口

## 常见的shell

- sh
- **bash**是Linux的标准shell，与sh相兼容
- csh
- tcsh
- ksh
- zsh

# 3.结合man命令总结linux常用基本命令用法以及查看帮助文档的方法

## linux常用基本命令用法

```
help 查看内部命令帮助
man 查看外部命令帮助
type 查看命令类型
whatis 列出简短命令说明和man章节
whereis 列出命令位置与man章节手册位置
shutdown 
  -h halt方式关机
  -r 重启
  -c 取消
  now 立刻执行
  1 1分钟后执行
reboot 重启
pwd 打印当前工作目录
  -P 展示真实物理地址
cd 改变当前工作目录
ls 列出目录下文件
  -a 显示隐藏文件
  -l 显示详细信息
  -h 人类可读
  -t 按时间排序
ll alias
    Ubuntu alias ll='ls -alF'
    Rocky alias ll='ls -l --color=auto'
stat 显示文件状态
  -f 显示文件系统状态
file 确定文件内容以确定打开方式
ln 创建链接文件
  -s 创建软链接
touch 新建文件或刷新文件时间
mkdir 创建目录
  -p递归创建
rm 删除文件或目录
  -f 强制删除
  -i 删除前询问
  -r 递归删除目录
rmdir 删除目录
  -p 递归删除
cp 复制文件
  -r 递归复制
  -i 覆盖前确认
  -n 不覆盖
  -b 复制前备份
  -v 显示过程
mv 移动文件或重命名
  -i 覆盖前确认
  -n 不覆盖
  -v 显示过程
```

## 查看帮助文档的方法

### 内部命令帮助查看

- help COMMAND
- man bash

### 外部命令帮助查看

- man COMMAND
- info COMMAND
- COMMAND --help
- COMMAND -h

### /usr/share/doc下的文档，官网以及百度...

4.总结linux文件系统目录结构和目录的功能

## 目录结构

文件系统遵循FHS文件系统层次化标准

单根倒置树结构

/表示根，也用于分隔路径

文件名大小写敏感

.开头为隐藏文件

文件名最长255字节

包含路径最长4095字节

颜色对应

- 蓝色->目录
- 绿色->可执行
- 红色->压缩
- 浅蓝色->链接
- 灰色->其他

除了/和NUL所有字都有效

文件有元数据：metadata即属性和数据：data即文件内容

## 文件系统目录的功能

![screen-capture](/img/in-post/第一周作业/3576e40d73def3cd2bacb2321b706594.png)

### ps：目录的功能

目录记录文件名和inode对应关系

# 5.总结文件操作常见的命令和文件夹常见操作和命令

```
stat 显示文件状态
  -f 显示文件系统状态
file 确定文件内容以确定打开方式
ln 创建链接文件
  -s 创建软链接
touch 新建文件或刷新文件时间
mkdir 创建目录
  -p递归创建
rm 删除文件或目录
  -f 强制删除
  -i 删除前询问
  -r 递归删除目录
rmdir 删除目录
  -p 递归删除
cp 复制文件
  -r 递归复制
  -i 覆盖前确认
  -n 不覆盖
  -b 复制前备份
  -v 显示过程
mv 移动文件或重命名
  -i 覆盖前确认
  -n 不覆盖
  -v 显示过程
```

# 6.总结文件元数据相关的知识点，包含硬链接和软连接的区别等知识

## 元数据

文件元数据代表文件属性

inode索引节点存储元数据

磁盘分为两部分，一部分存储inode，一部分存储数据块

目录记录文件名和inode对应关系

文件名->inode->inode表->数据块

***

cp命令：分配空闲inode号，在inode表中生成新条目，在目录创建目录项将名称与inode号关联，拷贝数据块

***

rm命令：释放inode号，将数据块放在空闲列表中，数据没有被实际删除而是后续被覆盖

***

mv命令：在同分区时用新文件名创建目录对应项，删除旧目录条目，不影响inode表或磁盘数据

若跨分区移动相当于cp和rm

## 硬链接 & 软链接

### 硬链接

一个文件两个文件名

使用同一inode号

删除原原文件不会导致硬链接失效

不能给目录创建硬链接，但系统可以创建.和..，因此一个目录的链接数=2+子目录数

### 软链接

通过文件名指向另一个文件

删除原文件会导致软链接失效

可以给目录创建软链接

文件路径相对软链接文件位置

# 7.总结开放系统互联OSI模型，每层作用及对应的协议

![667fcf1f621a2f0c56a16382ba0b4c67.jpg](/img/in-post/第一周作业/4835935d1d0c1ed58180fec37486c3c0.jpg)

![截图](/img/in-post/第一周作业/ef5469b813b718d8f9bca7081266426a.png)

![截图](/img/in-post/第一周作业/8e3634f37c289de80aba576957701c8e.png)

## 物理层：

- 负责传输比特流，提供物理连接和传输介质，如电缆、光缆等。
- 包括了针脚、电压、线缆规范、集线器、中继器、主机接口卡等。

## 数据链路层：

- 在相邻的两个节点之间建立、维持和释放数据链路，进行差错控制和流量控制。
- 通过网卡设备的物理标识每一个主机的唯一地址。
- 例如以太网、无线局域网（Wi-Fi）和通用分组无线服务（GPRS）等。

## 网络层：

- 为分组交换网上的不同主机提供通信服务，实现网络互联和路由选择。
- 例如:互联网协议（IP）等。

### IP协议

IP地址（Internet Protocol Address）是指互联网协议地址，又称网际协议地址。IP地址是IP协议提供的一种统一的地址格式，为互联网上的每一个网络和每一台主机分配一个逻辑地址，以此来屏蔽物理地址的差异。

![1919e814eefe0fe589c78136885e8ffe.jpg](/img/in-post/第一周作业/dfe72a5d373c937d5d0d3808496e9f8b.jpg)

![03df1b1b6cfc1d1dc07b5e231c633b5b.jpg](/img/in-post/第一周作业/eecba19238edd5dc244f815518120c30.jpg)

![9388f0b63da427b2e5f3dfed48095861.jpg](/img/in-post/第一周作业/7d3e28c793bf4ae63ce520823d962425.jpg)

## 传输层：

- 为应用程序提供端到端的通信服务，确保数据在传输过程中的完整性和可靠性。
- 例如:传输控制协议（TCP）等。

### TCP

TCP（Transmission Control Protocol）即传输控制协议，是一种面向连接的、可靠的、基于字节流的传输层通信协议。

![a2ce8135e97969419a7bb00215acb05f.jpg](/img/in-post/第一周作业/3094800aa1246337701b4d169f85ee39.jpg)

![18f11811eba2698ef1967ffffc264f33.jpg](/img/in-post/第一周作业/77eb51d6c634a9bafee7bb27a6c20536.jpg)

### UDP

UDP（User Datagram Protocol）即用户数据报协议，是一种无连接的、不可靠的传输层通信协议。

## 会话层：

- 负责建立、管理和终止会话，实现数据同步等功能。

## 表示层：

- 负责数据的表示和编码转换，确保数据在不同系统之间的兼容性。
- unicode是编码方案，utf8是其中的一种具体实现方案。
- 我们平常所的文件类型后缀，其实都是数据的一种表现样式。

## 应用层：

- 为应用软件提供网络服务，如文件传输、电子邮件等 -- 生成数据的一种方式。
例如: HTTP、HTTPS、FTP、TELNET、SSH、SMTP、POP3、MySQL等

### DNS(Domain Name System)

DNS 是互联网上解决网络中机器命名的一种系统。

在网络中，一台主机去访问另外一台主机时，必须要知道目标主机的IP地址，虽然网络上的节点都可以用IP地址来标识，并且可以通过IP地址被访问。但对于自然人而言，一组组由数字组成的IP地址，是难以被理解和记忆的。于是设计出了域名系统，用一组有意义的字符来表示某个特定主机或某个网络，再将网络中主机IP地址和域名之间做成一个映射表。

域名->ip

### HTTP（HyperText Transfer Protocol）

超文本传输协议，是互联网上信息传递与共享的核心应用层协议。

用于从万维网（WWW）服务器传输超文本到本地浏览器的传送协议，它允许客户端（如浏览器）与服务器之间进行信息交互，使得用户能够通过浏览器访问各种网页、获取图片、视频、音频等资源，是互联网上信息交流的重要基础。

# 8.如何将10.0.0.0/8划分32个子网？求每个子网的掩码，主机数

/8->前8位为网络号

32个子网->2^5->需要额外5位网络号

每个子网有13位网络号，19位主机号

子网掩码：11111111	11111000	00000000	00000000 即 255.248.0.0

主机数2^19-2=524286

# 9.安装nodejs，并且使用npm完成hexo的安装，安装nginx，并且完成hexo博客页面的部署

## 环境准备

```
[root@ubuntu /]# apt install nodejs npm nginx -y
[root@ubuntu /]# n 20.19.0
[root@ubuntu /]# hash -r
```

## 安装软件并定制项目

```
[root@ubuntu /]# mkdir /data/codes/hexo_project -p
[root@ubuntu /]# cd /data/codes/hexo_project/
[root@ubuntu hexo_project]# npm config set registry https://registry.npmmirror.com
[root@ubuntu hexo_project]# npm install -g hexo-cli
[root@ubuntu hexo_project]# hexo init myblogs
[root@ubuntu hexo_project]# cd myblogs
[root@ubuntu myblogs]# npm config set registry https://registry.npmmirror.com
[root@ubuntu myblogs]# npm install
```

## 后台运行nodejs并修改nginx配置

```
[root@ubuntu myblogs]# nohup hexo nohup hexo server >> hexo.log 2>&1 &
[root@ubuntu myblogs]# cd ~
[root@ubuntu ~]# vim /etc/nginx/sites-enabled/default
```

### nginx配置中修改proxy_pass

```
location / {
 49         # First attempt to serve request as file, then
 50         # as directory, then fall back to displaying a 404.
 51         proxy_pass http://localhost:4000; # 修改此处地址
 52     }
```

## 重新启动nginx

```
[root@ubuntu ~]# nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
[root@ubuntu ~]# systemctl restart nginx
```

### 访问对应ip即可

![截图](/img/in-post/第一周作业/ef625360e385f175a9f6d11d5799f2cd.png)

# 10.总结http协议常见的状态码和一次http请求的完整流程

## 常见状态码

|状态码|状态短语|说明|
|--|--|--|
|200|OK|请求成功，一般用于GET与POST请求|
|301|Moved Permanently|永久重定向，客户端请求的资源被移动到新的URI，返回信息中 包含新的URI，客户端自动请求|
|302|Found|临时重定向，其它与301相同|
|304|Not Modified|自上次访问以来，该资源没有发生更改，客户端直接使用本地缓存|
|400|Bad Request|客户端请求的语法错误，服务器无法理解，此状态码是一个通用错误码，并不能准确描述错误|
|401|Unauthorized|请求要求用户的身份认证|
|403|Forbidden|服务器理解请求客户端的请求，但是拒绝执行此请求，原因有多 样，通常是没有权限|
|404|Not Found|服务器上没有找到客户端需要访问的资源|
|500|Internal Server Error|服务器内部错误，无法完成请求|
|502|Bad Gateway|服务端网关错误|
|503|Service Unavailable|服务器当前很忙，暂时无法响应请求|
|504|Gateway Time-out|服务端网关超时|

## http请求完整流程

### 1.建立连接

- 浏览器解析URL，确定服务器域名和端口(HTTP默认80，HTTPS默认443)
- 进行TCP三次握手建立可靠连接

### 2.发送请求

浏览器构建HTTP请求报文：

请求行包含：

- 请求方法（如GET、POST等）
- 请求URI（统一资源标识符，指定了要访问的资源的位置）
- HTTP版本号（表示请求所使用的HTTP协议版本）等

头部字段：使用key-value形式传递一些请求信息，如：

- Accept（客户端可以接受的响应内容类型）、
- User-Agent（客户端的浏览器信息）、
- Referer（客户端从哪个页面跳转而来）等

正文：可选部分，用于向服务器传递一些数据。例如，

- 当客户端向服务器提交表单时，表单数据就可以放在请求的正文中。

```
GET / HTTP/1.1
Host: example.com
Accept: text/html,application/xhtml+xml
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)
Accept-Language: zh-CN,zh;q=0.9
Connection: keep-alive
```

### 3.处理请求

- Web服务器(如Nginx、Apache)接收请求
- 解析请求行、头部字段
- 查找请求的资源(HTML文件)
- 准备响应数据

### 4.发送响应

服务器将处理后的响应发送回客户端。

- 状态行：包含HTTP版本号、状态码和状态短语。
- 状态码是一个三位数字，用于表示服务器对请求的处理结果（如200表示成功，404表示未找到资源，500表示服务器内部错误等）。
- 状态短语是对状态码的简短描述。

头部字段：使用key-value形式传递一些响应信息，如

- Content-Type（响应内容的类型）
- Content-Length（响应内容的长度）
- Set-Cookie（服务器要求客户端保存一个Cookie等）。

正文：响应的实际内容。

- 例如，当客户端请求一个网页时，网页的HTML代码就可以放在响应的正文中。

```
HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Content-Length: 1256
Server: nginx/1.18.0
Date: Wed, 01 Nov 2023 08:00:00 GMT

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>示例页面</title>
</head>
<body>
<!-- 页面内容 -->
</body>
</html>
```

### 5.断开连接

连接在请求和响应之后通常会被关闭，以释放系统资源。然而，在HTTP/1.1中引入了持久连接（也称为连接重用），允许在同一个TCP连接上发送和接收多个HTTP请求和响应，从而提高了网络传输的效率。
